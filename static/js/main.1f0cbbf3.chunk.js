(this.webpackJsonpcheckinout=this.webpackJsonpcheckinout||[]).push([[0],{108:function(e,t){},230:function(e,t,n){},231:function(e,t,n){},245:function(e,t){},247:function(e,t){},291:function(e,t){},293:function(e,t){},325:function(e,t){},327:function(e,t){},328:function(e,t){},333:function(e,t){},335:function(e,t){},341:function(e,t){},343:function(e,t){},362:function(e,t){},374:function(e,t){},377:function(e,t){},434:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(59),o=n.n(a),i=(n(230),n(15)),s=(n.p,n(231),n(46)),u=n(7),l=n.n(u),d=n(31),b=n(13),g=(n(233),{type:"service_account",project_id:"checkinout-264819",private_key_id:"49b07528555b308684702bfe99ddbbe1bce990b0",private_key:"-----BEGIN PRIVATE KEY-----\nMIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDYwK3SuzBVVPi6\npTN9gyZ0uGvaLxz7+4EV8BoZfg9JGY4mqhm+8HhE4en4DoY5Subw64zwiNZvE1ZO\nrcJFOKtbQsEG8mL+vjg8PmqZXh4KjHOH23H8njFusGlXF5r1+rJ1zU2DOUYAruGH\nfHCyNJyb9ifs9V+JgXNa+N+oWw6/8yI1q1w3nFnAIQbf8rnVtg0VdkRkKmd9TS/z\n7XtuZ76UcR3NsqbscAFmG7nIpRGeIxlnpLAjdNsuOgW2jkaFFW/EvpnCpC9WDYqz\nTbI6BRasHoj1JXcV1RFmgpTOH7Ykfh2WJfP+79ikmWS9qDjWl077VoqfbP6JRQSN\nL9jCGvJXAgMBAAECggEARdzIygDqob5rEyG3OG/Cv+FHZgJEedWFNFB44RmYDKwv\nfLfb54azhSQ52Om5ipLhX+rUOR0p3JBjg6WO1effl2ErPTV4AfrGvmgxzLAgx66g\neDwbf9xvO2mh8l/Z4wnEZqLfJnoZ3ZOAfr51xoKdrclH8iDeg8AVMc/Aqw96cBRx\n9uqQH4Ltm7PAL/ssCpTWPm8cta2c7be+j8HTtlg9vG+hS+AEYyatgQi7qE7gK0rL\nqXk3m4/7E6qISUqlCZCJ85D1nHCVB66eZwkeZbFsZOZkgBQCNwTdSlrJ/I7Iz+S4\njkPnmscG0Re2M871Ke9Vboim39XS6uGSJCdFDeZGmQKBgQD+eY3A91N5dWKDttB6\nClQUKoVhGKpqgNefnDUWGvwWq4Zb45V4UJsdob29f3dy5jBLL7ZOFlowjgz+9PC1\npXoqDCgoucqHQkZIJ6ONBEemJ+P3K1ClFd8tkV/QCiPL9eqlzb+6SEDvXBErmp9w\n3Sxp7erRHR1hMHw3HCNIxa6ymQKBgQDaDT9QxxeOOzP5Fv/FEPdyV8LTvIUNgba+\nW/gsaXjUGCQggTyV9x5kC9fj5sm9Zv+olDuFUI7/PwoFSTS7FpJ/cxjj99/7rzer\nq/ZI+dlccXVvBM2i2Ykdyj1cLb67iHCF1c9IR1ewLqhDRjn908gJ2p9Ey5G1r41N\nkbSRherSbwKBgQCXlNRpg2nHybJ6/uTELW7T7Fgy9Dxe4IyQWL4OgthysI2CItig\nKHOdfQDG5izC1nch8jPH4+ypS5RWMpVHvmA8t60cRT9svn+a73GuyEPdp5lVXAnX\nrGWagSPvinq0PbIePabdUbjMW60mqh4bXsPb/YqIMa2UfQsg0LP73zUm0QKBgQDO\naB3YRC4bGBWxo8DHdbEWjtbBAcJdL72h4oNA3zJeat+/2TZVqxAcmk1p0WyEmrxF\ngtP49XH3UmAU8uA0fUB93qDgIyLmJ02mduhy2feUl14Xkk9p6UvvZCLDYBYdhSEm\nv2cwvz/VacUjsZVxngjMsyNyxtSOTLiQhe2Ml1zahwKBgQCFPBuGF/n6l5XW0JhQ\n1CVr629oGsHNPWdnxGAAb0DLQleKJx4IIGwIhhwtajn5tZUS8AjNQPmYnCpLUOPa\nROBQVlP4nhdOVaYkEwzAp/IbuuVm25ss4Y1+GjGVLKnVm5bFnVPjzK2rp0wByO2b\n13OmmjWwqik4xsM8bNmUxWQzsw==\n-----END PRIVATE KEY-----\n",client_email:"sheet-reader@checkinout-264819.iam.gserviceaccount.com",client_id:"104178988975545314029",auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://oauth2.googleapis.com/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs",client_x509_cert_url:"https://www.googleapis.com/robot/v1/metadata/x509/sheet-reader%40checkinout-264819.iam.gserviceaccount.com"}),h=n(16),m=(n(234),n.p+"static/media/Logo.f0526f33.png"),p=n(222),j=n.n(p),f=n(1);var x=function(e){var t=Object(r.useRef)(),n=Object(r.useRef)(),c=Object(r.useState)(!1),a=Object(b.a)(c,2),o=a[0],i=a[1],s=Object(r.useState)(),u=Object(b.a)(s,2),l=u[0],d=u[1],g=Object(r.useState)(!1),h=Object(b.a)(g,2),m=h[0],p=h[1];function x(){if(!o)if(t.current.readyState!==t.current.HAVE_ENOUGH_DATA);else{n.current.height=t.current.videoHeight,n.current.width=t.current.videoWidth;var r=n.current.getContext("2d");r.drawImage(t.current,0,0,n.current.width,n.current.height);var c=r.getImageData(0,0,n.current.width,n.current.height),a=j()(c.data,c.width,c.height,{inversionAttempts:"dontInvert"});a&&(console.log(a.data),d({data:a.data,time:new Date}),e.myFunc(),i(!0),setTimeout((function(){i(!1)}),3e3))}}return Object(r.useEffect)((function(){l&&(e.onScan(l.data),p(!0),setTimeout((function(){p(!1)}),500),d(null))}),[l]),Object(r.useEffect)((function(){var e=setInterval((function(){requestAnimationFrame(x)}),200);return function(){clearInterval(e)}}),[]),Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((function(e){console.log(e);try{t.current.srcObject=e,t.current.setAttribute("playsinline",!0),t.current.play()}catch(n){}}))}),[t,n]),Object(f.jsxs)("div",{children:[Object(f.jsx)("video",{style:{height:"100%",width:"auto",filter:m?"brightness(0%)":"brightness(100%)"},ref:t}),Object(f.jsx)("canvas",{ref:n,hidden:!0})]})},O="1FqeRNFlZZ7aJdtYRmjZ1kRb2-sarN9aoTMGyu4jhGKs",v=new(0,n(112).GoogleSpreadsheet)(O);var y=function(e){var t=Object(r.useState)({}),n=Object(b.a)(t,2),c=n[0],a=n[1],o=Object(r.useState)((new Date).toLocaleDateString()),i=Object(b.a)(o,2),u=i[0],p=(i[1],Object(r.useState)(!1)),j=Object(b.a)(p,2),O=j[0],y=j[1];function k(e){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(l.a.mark((function e(t){var n,r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("finding student row"),e.next=3,c.getRows();case 3:n=e.sent,console.log("rows"),console.log(n),console.log("ID"),console.log(t),r=Object(s.a)(n),e.prev=9,r.s();case 11:if((a=r.n()).done){e.next=18;break}if((o=a.value).ID!=t){e.next=16;break}return console.log(o.ID),e.abrupt("return",o.rowNumber);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[9,20,23,26]])})))).apply(this,arguments)}function C(){return(new Date).toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"numeric"})}function S(){return(S=Object(d.a)(l.a.mark((function e(t){var n,r,a,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("reached function"),console.log("data"),console.log(t),!t){e.next=37;break}if(console.log("handling scanning"),!O){e.next=7;break}return e.abrupt("return");case 7:return y(!0),n=t,e.next=11,k(n);case 11:if(r=e.sent,a=C(),null!==r){e.next=17;break}h.c.error("\u2757 Student ID could not be found!",{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=36;break;case 17:return e.next=19,c.getRows();case 19:if(o=e.sent,(i=o[parseInt(r)-2])["Check in"]){e.next=28;break}return i["Check in"]=a,e.next=25,i.save();case 25:h.c.success("\ud83d\udc4b Checked in ".concat(i["\uc774\ub984"]," at ").concat(a,"!"),{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=36;break;case 28:if(i["Check out"]){e.next=35;break}return i["Check out"]=a,e.next=32,i.save();case 32:h.c.success("\ud83d\udeaa Checked out ".concat(i["\uc774\ub984"]," at ").concat(a,"!"),{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=36;break;case 35:h.c.warn("\ud83d\udfe1 ".concat(i["\uc774\ub984"]," is already accounted for!"),{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 36:y(!1);case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.useServiceAccountAuth(g);case 2:return e.next=4,v.loadInfo();case 4:v.sheetsByTitle[u]?(t=v.sheetsByTitle[u],console.log("tS"),console.log(t),a(t),h.c.success("\u2705 Ready to check in!",{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})):(h.c.warning("Please create the spreadsheet for today and reload the app to check in!",{position:"bottom-center",autoClose:3e5,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),h.c.error("\u2757 Could not find spreadsheet with today's date!",{position:"bottom-center",autoClose:3e5,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[u]),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"row",marginTop:"1rem",marginBottom:"1rem"},children:[Object(f.jsx)("img",{style:{height:"3rem",marginRight:"1rem"},src:m}),Object(f.jsx)("h1",{style:{textAlign:"center",margin:0},children:"SVKS Check In/Out"})]}),Object(f.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden",height:"calc(100vh - 10rem)"},children:Object(f.jsx)(x,{onScan:function(e){return S.apply(this,arguments)},myFunc:function(){console.log("helo")}})})]})},k=n(224),w=n(5),C=n(225),S=n(74),D=n.n(S),B=n(436),I=n(223),A=c.a.forwardRef((function(e,t){return Object(f.jsx)("div",{className:"toPrint",ref:t,style:Object(i.a)({width:"100%"},"width","max(calc(100vw - 30rem), 80%)"),children:e.children})})),P=new(0,n(112).GoogleSpreadsheet)(O);function T(e,t){var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),r=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.abs(Math.floor((r-n)/864e5))}var E=function(e){var t,n=Object(r.useState)({}),c=Object(b.a)(n,2),a=(c[0],c[1]),o=Object(r.useState)({}),u=Object(b.a)(o,2),p=u[0],j=u[1],x=Object(r.useState)(""),O=Object(b.a)(x,2),v=O[0],y=O[1],k=Object(r.useState)(""),w=Object(b.a)(k,2),S=w[0],E=w[1],R=Object(B.a)(S,50),F=Object(b.a)(R,1)[0],H=Object(r.useState)([]),G=Object(b.a)(H,2),L=G[0],z=G[1],V=Object(r.useState)([]),Q=Object(b.a)(V,2),q=Q[0],N=Q[1],J=Object(r.useRef)(),Z=Object(I.useReactToPrint)({content:function(){return J.current}});function U(e){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(l.a.mark((function e(t){var n,r,c,a,o,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Object(s.a)(p),e.prev=2,r.s();case 4:if((c=r.n()).done){e.next=11;break}if(o=c.value,!(n.length>4)){e.next=8;break}return e.abrupt("break",11);case 8:((o.ID+"").includes(t)||(null===(a=o["\uc774\ub984"])||void 0===a?void 0:a.includes(t)))&&(i="".concat(o["\uc774\ub984"],":  ").concat(o.ID),u={text:i,name:o["\uc774\ub984"],id:o.ID},n.push(u));case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.useServiceAccountAuth(g);case 2:return e.next=4,P.loadInfo();case 4:t=new Date,n=new Date;case 6:if(P.sheetsByTitle[t.toLocaleDateString()]){e.next=12;break}if(t.setDate(t.getDate()-1),!(T(n,t)>400)){e.next=10;break}return e.abrupt("break",12);case 10:e.next=6;break;case 12:if(t=t.toLocaleDateString(),P.sheetsByTitle[t]){e.next=17;break}h.c.error("\u2757 Could not find data to use.",{position:"bottom-center",autoClose:3e5,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=24;break;case 17:return r=P.sheetsByTitle[t],a(r),e.next=21,r.getRows();case 21:c=e.sent,j(c),h.c.success("\u2705 Found ID data.",{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)(Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F){e.next=8;break}return e.next=3,U(F);case 3:1===(t=e.sent).length&&y(t[0]),t.length>0&&z(t),e.next=10;break;case 8:y({}),z([]);case 10:case"end":return e.stop()}}),e)}))),[F]),Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",backgroundColor:"white"},children:[Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"row",marginTop:"1rem",marginBottom:"1rem"},children:[Object(f.jsx)("img",{style:{height:"3rem",marginRight:"1rem"},src:m}),Object(f.jsx)("h1",{style:{textAlign:"center",margin:0},children:"Print QR Codes"})]}),Object(f.jsxs)("div",{style:{marginTop:"4rem",marginBottom:"4rem",width:"max(calc(100vw - 30rem), 80%)",fontSize:"1.5rem"},children:[Object(f.jsx)("input",{placeholder:"Search for student or enter a number...",style:{width:"100%",fontSize:"1.5rem",border:"2px solid lightgray",borderRadius:"1rem",outline:"none",padding:"1rem",boxSizing:"border-box",textAlign:"center"},value:S,onChange:function(e){E(e.target.value)}}),L.map((function(e){return Object(f.jsxs)("div",{onClick:function(){N([].concat(Object(C.a)(q),[e]))},style:{width:"100%",marginTop:"0.5rem",border:"1px solid lightgray",borderRadius:"1rem",padding:"0.5rem",boxSizing:"border-box",userSelect:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(f.jsx)("h4",{style:{marginRight:"2rem",marginTop:0,marginBottom:0},children:e.text}),v.id&&Object(f.jsx)(D.a,{size:50,value:v.id})]})}))]}),q.length>0&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{style:(t={width:"100%"},Object(i.a)(t,"width","max(calc(100vw - 30rem), 80%)"),Object(i.a)(t,"boxSizing","border-box"),Object(i.a)(t,"padding","1rem"),Object(i.a)(t,"display","grid"),Object(i.a)(t,"gridTemplateColumns","repeat(auto-fill, minmax(150px, 1fr))"),Object(i.a)(t,"gap","1rem"),t),children:q.map((function(e){return Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(f.jsx)(D.a,{size:100,value:e.id}),Object(f.jsx)("p",{style:{marginTop:"0.5rem",marginBottom:0},children:e.text}),Object(f.jsx)("button",{style:{marginTop:"0.5rem",border:"2px solid lightgray",borderRadius:"1rem",padding:"0.5rem",boxSizing:"border-box",width:"3rem"},onClick:function(){N(q.filter((function(t){return t.id!=e.id})))},children:"X"})]})}))}),Object(f.jsx)(A,{ref:J,children:Object(f.jsx)("div",{style:{width:"100%",boxSizing:"border-box",display:"block"},children:q.map((function(e){var t;return Object(f.jsxs)("div",{style:(t={display:"flex",flexDirection:"column",alignItems:"center"},Object(i.a)(t,"display","inline-block"),Object(i.a)(t,"boxSizing","border-box"),Object(i.a)(t,"padding","1rem"),t),children:[Object(f.jsx)(D.a,{style:{margin:"2rem"},size:160,value:e.id}),Object(f.jsx)("p",{style:{marginTop:"0.5rem",marginBottom:0,textAlign:"center"},children:e.text})]})}))})}),Object(f.jsx)("button",{style:{marginBottom:"1rem",marginTop:"1rem",border:"2px solid lightgray",borderRadius:"1rem",padding:"0.5rem",boxSizing:"border-box",width:"min(30rem, 80%)"},onClick:Z,children:"Print codes."})]})]})};var R=function(){var e;return Object(f.jsx)(k.a,{children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)(w.c,{children:[Object(f.jsx)(w.a,{path:"/",element:Object(f.jsx)(y,{})}),Object(f.jsx)(w.a,{path:"print",element:Object(f.jsx)(E,{})})]}),Object(f.jsx)(h.a,(e={position:"bottom-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0},Object(i.a)(e,"pauseOnFocusLoss",!1),Object(i.a)(e,"transition",h.b),Object(i.a)(e,"icon",!1),e)),Object(f.jsx)("h1",{style:{textAlign:"center",margin:0,color:"lightgray",fontSize:"1rem",marginTop:"1rem",marginBottom:"1rem"},children:"v 1.4"})]})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,437)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(R,{})}),document.getElementById("root")),F()}},[[434,1,2]]]);
//# sourceMappingURL=main.1f0cbbf3.chunk.js.map