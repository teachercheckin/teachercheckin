(this.webpackJsonpcheckinout=this.webpackJsonpcheckinout||[]).push([[0],{103:function(e,t){},217:function(e,t,n){},218:function(e,t,n){},233:function(e,t){},235:function(e,t){},279:function(e,t){},281:function(e,t){},313:function(e,t){},315:function(e,t){},316:function(e,t){},321:function(e,t){},323:function(e,t){},329:function(e,t){},331:function(e,t){},350:function(e,t){},362:function(e,t){},365:function(e,t){},413:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(66),a=n.n(c),s=(n(217),n(68)),i=(n.p,n(218),n(211)),u=n(7),l=n.n(u),g=n(69),d=n(27),h=(n(220),{type:"service_account",project_id:"checkinout-264819",private_key_id:"49b07528555b308684702bfe99ddbbe1bce990b0",private_key:"-----BEGIN PRIVATE KEY-----\nMIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDYwK3SuzBVVPi6\npTN9gyZ0uGvaLxz7+4EV8BoZfg9JGY4mqhm+8HhE4en4DoY5Subw64zwiNZvE1ZO\nrcJFOKtbQsEG8mL+vjg8PmqZXh4KjHOH23H8njFusGlXF5r1+rJ1zU2DOUYAruGH\nfHCyNJyb9ifs9V+JgXNa+N+oWw6/8yI1q1w3nFnAIQbf8rnVtg0VdkRkKmd9TS/z\n7XtuZ76UcR3NsqbscAFmG7nIpRGeIxlnpLAjdNsuOgW2jkaFFW/EvpnCpC9WDYqz\nTbI6BRasHoj1JXcV1RFmgpTOH7Ykfh2WJfP+79ikmWS9qDjWl077VoqfbP6JRQSN\nL9jCGvJXAgMBAAECggEARdzIygDqob5rEyG3OG/Cv+FHZgJEedWFNFB44RmYDKwv\nfLfb54azhSQ52Om5ipLhX+rUOR0p3JBjg6WO1effl2ErPTV4AfrGvmgxzLAgx66g\neDwbf9xvO2mh8l/Z4wnEZqLfJnoZ3ZOAfr51xoKdrclH8iDeg8AVMc/Aqw96cBRx\n9uqQH4Ltm7PAL/ssCpTWPm8cta2c7be+j8HTtlg9vG+hS+AEYyatgQi7qE7gK0rL\nqXk3m4/7E6qISUqlCZCJ85D1nHCVB66eZwkeZbFsZOZkgBQCNwTdSlrJ/I7Iz+S4\njkPnmscG0Re2M871Ke9Vboim39XS6uGSJCdFDeZGmQKBgQD+eY3A91N5dWKDttB6\nClQUKoVhGKpqgNefnDUWGvwWq4Zb45V4UJsdob29f3dy5jBLL7ZOFlowjgz+9PC1\npXoqDCgoucqHQkZIJ6ONBEemJ+P3K1ClFd8tkV/QCiPL9eqlzb+6SEDvXBErmp9w\n3Sxp7erRHR1hMHw3HCNIxa6ymQKBgQDaDT9QxxeOOzP5Fv/FEPdyV8LTvIUNgba+\nW/gsaXjUGCQggTyV9x5kC9fj5sm9Zv+olDuFUI7/PwoFSTS7FpJ/cxjj99/7rzer\nq/ZI+dlccXVvBM2i2Ykdyj1cLb67iHCF1c9IR1ewLqhDRjn908gJ2p9Ey5G1r41N\nkbSRherSbwKBgQCXlNRpg2nHybJ6/uTELW7T7Fgy9Dxe4IyQWL4OgthysI2CItig\nKHOdfQDG5izC1nch8jPH4+ypS5RWMpVHvmA8t60cRT9svn+a73GuyEPdp5lVXAnX\nrGWagSPvinq0PbIePabdUbjMW60mqh4bXsPb/YqIMa2UfQsg0LP73zUm0QKBgQDO\naB3YRC4bGBWxo8DHdbEWjtbBAcJdL72h4oNA3zJeat+/2TZVqxAcmk1p0WyEmrxF\ngtP49XH3UmAU8uA0fUB93qDgIyLmJ02mduhy2feUl14Xkk9p6UvvZCLDYBYdhSEm\nv2cwvz/VacUjsZVxngjMsyNyxtSOTLiQhe2Ml1zahwKBgQCFPBuGF/n6l5XW0JhQ\n1CVr629oGsHNPWdnxGAAb0DLQleKJx4IIGwIhhwtajn5tZUS8AjNQPmYnCpLUOPa\nROBQVlP4nhdOVaYkEwzAp/IbuuVm25ss4Y1+GjGVLKnVm5bFnVPjzK2rp0wByO2b\n13OmmjWwqik4xsM8bNmUxWQzsw==\n-----END PRIVATE KEY-----\n",client_email:"sheet-reader@checkinout-264819.iam.gserviceaccount.com",client_id:"104178988975545314029",auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://oauth2.googleapis.com/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs",client_x509_cert_url:"https://www.googleapis.com/robot/v1/metadata/x509/sheet-reader%40checkinout-264819.iam.gserviceaccount.com"}),b=n(16),f=(n(221),n.p+"static/media/Logo.f0526f33.png"),p=n(212),m=n.n(p),v=n(11);var O=function(e){var t=Object(r.useRef)(),n=Object(r.useRef)(),o=Object(r.useState)(!1),c=Object(d.a)(o,2),a=c[0],s=c[1],i=Object(r.useState)(),u=Object(d.a)(i,2),l=u[0],g=u[1],h=Object(r.useState)(!1),b=Object(d.a)(h,2),f=b[0],p=b[1];function O(){if(!a)if(t.current.readyState!==t.current.HAVE_ENOUGH_DATA);else{n.current.height=t.current.videoHeight,n.current.width=t.current.videoWidth;var r=n.current.getContext("2d");r.drawImage(t.current,0,0,n.current.width,n.current.height);var o=r.getImageData(0,0,n.current.width,n.current.height),c=m()(o.data,o.width,o.height,{inversionAttempts:"dontInvert"});c&&(console.log(c.data),g({data:c.data,time:new Date}),e.myFunc(),s(!0),setTimeout((function(){s(!1)}),3e3))}}return Object(r.useEffect)((function(){l&&(e.onScan(l.data),p(!0),setTimeout((function(){p(!1)}),500),g(null))}),[l]),Object(r.useEffect)((function(){var e=setInterval((function(){requestAnimationFrame(O)}),200);return function(){clearInterval(e)}}),[]),Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((function(e){console.log(e);try{t.current.srcObject=e,t.current.setAttribute("playsinline",!0),t.current.play()}catch(n){}}))}),[t,n]),Object(v.jsxs)("div",{children:[Object(v.jsx)("video",{style:{height:"100%",width:"auto",filter:f?"brightness(0%)":"brightness(100%)"},ref:t}),Object(v.jsx)("canvas",{ref:n,hidden:!0})]})},j=new(0,n(223).GoogleSpreadsheet)("1sj8Hk1nN-pushHCR-pKLoNJWHQMIOnL1SBTueItOLvQ");var x=function(e){var t=Object(r.useState)({}),n=Object(d.a)(t,2),o=n[0],c=n[1],a=Object(r.useState)((new Date).toLocaleDateString()),s=Object(d.a)(a,2),u=s[0],p=(s[1],Object(r.useState)(!1)),m=Object(d.a)(p,2),x=m[0],k=m[1];function w(e){return C.apply(this,arguments)}function C(){return(C=Object(g.a)(l.a.mark((function e(t){var n,r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("finding student row"),e.next=3,o.getRows();case 3:n=e.sent,console.log("rows"),console.log(n),console.log("ID"),console.log(t),r=Object(i.a)(n),e.prev=9,r.s();case 11:if((c=r.n()).done){e.next=18;break}if((a=c.value).ID!=t){e.next=16;break}return console.log(a.ID),e.abrupt("return",a.rowNumber);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[9,20,23,26]])})))).apply(this,arguments)}function y(){return(new Date).toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"numeric"})}function A(){return(A=Object(g.a)(l.a.mark((function e(t){var n,r,c,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("reached function"),console.log("data"),console.log(t),!t){e.next=37;break}if(console.log("handling scanning"),!x){e.next=7;break}return e.abrupt("return");case 7:return k(!0),n=t,e.next=11,w(n);case 11:if(r=e.sent,c=y(),null!==r){e.next=17;break}b.c.error("\u2757 Student ID could not be found!",{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=36;break;case 17:return e.next=19,o.getRows();case 19:if(a=e.sent,(s=a[parseInt(r)-2])["Check in"]){e.next=28;break}return s["Check in"]=c,e.next=25,s.save();case 25:b.c.success("\ud83d\udc4b Checked in ".concat(s["\uc774\ub984"]," at ").concat(c,"!"),{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=36;break;case 28:if(s["Check out"]){e.next=35;break}return s["Check out"]=c,e.next=32,s.save();case 32:b.c.success("\ud83d\udeaa Checked out ".concat(s["\uc774\ub984"]," at ").concat(c,"!"),{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=36;break;case 35:b.c.warn("\ud83d\udfe1 ".concat(s["\uc774\ub984"]," is already accounted for!"),{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 36:k(!1);case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function e(){return(e=Object(g.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.useServiceAccountAuth(h);case 2:return e.next=4,j.loadInfo();case 4:j.sheetsByTitle[u]?(t=j.sheetsByTitle[u],console.log("tS"),console.log(t),c(t),b.c.success("\u2705 Ready to check in!",{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})):(b.c.warning("Please create the spreadsheet for today and reload the app to check in!",{position:"bottom-center",autoClose:3e5,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),b.c.error("\u2757 Could not find spreadsheet with today's date!",{position:"bottom-center",autoClose:3e5,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[u]),Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"row",marginTop:"1rem",marginBottom:"1rem"},children:[Object(v.jsx)("img",{style:{height:"3rem",marginRight:"1rem"},src:f}),Object(v.jsx)("h1",{style:{textAlign:"center",margin:0},children:"SVKS Check In/Out"})]}),Object(v.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden",height:"calc(100vh - 10rem)"},children:Object(v.jsx)(O,{onScan:function(e){return A.apply(this,arguments)},myFunc:function(){console.log("helo")}})}),Object(v.jsx)("h1",{style:{textAlign:"center",margin:0,color:"lightgray",fontSize:"1rem",marginTop:"1rem"},children:"v 1.0"})]})};var k=function(){var e;return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(x,{}),Object(v.jsx)(b.a,(e={position:"bottom-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0},Object(s.a)(e,"pauseOnFocusLoss",!1),Object(s.a)(e,"transition",b.b),Object(s.a)(e,"icon",!1),e))]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,414)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),c(e),a(e)}))};a.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(k,{})}),document.getElementById("root")),w()}},[[413,1,2]]]);
//# sourceMappingURL=main.348ca814.chunk.js.map